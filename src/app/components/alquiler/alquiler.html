<div class="alquiler">
  <div class="d-flex justify-content-end w-100 mx-5">
    <button routerLink="/dashboard/estaciones" class="nuevo-button">INICIAr NUEVO ALQUILEr</button>
  </div>
  @for (item of arrayAlquiler; track $index) {


  <div class="container">

    @if (!item.fechaFin) {
    <div (click)="renderEstaciones()" (click)="drop = !drop"  class="left-side">
      <div class="card">
        <div class="card-line"></div>
        <div class="buttons"></div>
      </div>
      <div class="post">
        <div class="post-line"></div>
        <div class="screen">
          <div class="dollar">Fin</div>
        </div>
        <div class="numbers"></div>
        <div class="numbers-line2"></div>
      </div>
    </div>
    <span class="loader"></span>
    }@else(){
    <div class="left">
      <div class="box">
        <div class="line"></div>
        <div class="btns"></div>
      </div>
    </div>


    }

    <div class="right-side">

      @if (item.fechaFin) {
      <div class="new">bicicleta {{item.bicicleta.estado}}<br> <span>serial:</span> {{item.bicicleta.serial}}
      </div>
    }@else{
      <div class="new">ALQUILER EN CURSO<br> <span>serial:</span> {{item.bicicleta.serial}}
      </div>
    }
      <div class="new"> <span>Recogida en:</span> {{item.estacionInicio?.nombre}}<br> <span>direccion:</span>
        {{item.estacionInicio?.ubicacion.direccion}}
      </div>
      <div class="new"> <span>Inicio:</span> {{ item.fechaInicio | date:'short'}}<br> <span>Fin:</span> {{item.fechaFin | date:'short'}}
      </div>
      @if (item.fechaFin) {
      <div class="costo "> <span>Costo:</span><br> ${{item.costo}}
      </div>
      }
    </div>
  </div>
  @if (!item.fechaFin) {
  <button (click)="drop = !drop" (click)="renderEstaciones()" class="fin-button">FINALIZAR ALQUILER?  indica la estacion de entrega</button>

  @if (drop) {
    <div class="tarjetas">
    <p class="rotated-text">EStACIONES</p>


    @for (itemE of estaciones; track $index) {

    <div (click)="finalizarAlquiler(item._id, itemE._id)" class="card-container">
      <div class="card-effect">
        <div class="card-inner">
          <div class="card__liquid"></div>
          <div class="card__shine"></div>
          <div class="card__glow"></div>
          <div class="card__content">
            <div class="card__badge">ID: {{itemE._id}}</div>
            <!-- <img class="card__image" src="{{item.imagen}}" alt=""> -->
            <div class="card__image justify-content-center d-flex pt-4 fs-5">
              <p class="card__title">{{itemE.nombre}}</p>
            </div>
            <div class="card__text">
              <p class="card__description">Direccion: {{itemE.ubicacion.direccion}}</p>
              <p class="card__description">Latitud: {{itemE.ubicacion.latitud}}</p>
              <p class="card__description">Longitud: {{itemE.ubicacion.longitud}}</p>
            </div>
            <div class="card__footer">
              <div class="card__price">Disponibles: {{itemE.bicicletasDisponibles}}</div>
              <div class="card__button">
                ir
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    }
  </div>
  }
  }
  }
</div>
